@model NoteLibrary.Models.Entities.User
@{
    ViewData["Title"] = "Login";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container mt-2 mb-2">
    <div class="row">
        <h2>Giriş Yap</h2>
        <hr />
        <div class="col-md-12">
            <div class="form-group">
                <label class="control-label">Email</label>
                <input id="Email" class="form-control" />
            </div>
            <div class="form-group">
                <label class="control-label">Şifre</label>
                <input id="Password" type="password" class="form-control" />
            </div>
            <input type="button" id="Submit" value="Giriş Yap" class="btn btn-default" style="background-color:#181818; color:#FFC300;" />
            <a href="/Home/Index" class="btn btn-default" style="background-color:#181818; color:#FFC300;">Geri Dön</a>
        </div>
    </div>
</div>

<script src="~/package/dist/sweetalert2.js"></script>
<script>
    var Submit = document.getElementById('Submit');

    Submit.addEventListener('click', function () {
        var password = document.getElementById('Password').value;
        var email = document.getElementById('Email').value;
        $.ajax({
            type: "POST",
            url: "/Account/Login",
            data: {
                Password: password,
                Email: email,
            },
            success: function (returndata) {
                if (returndata.ok) {
                    window.location.href = returndata.newurl;
                }

                else if (returndata.ok == false && returndata.message == "PasswordInvalid") {
                    Swal({
                        type: 'error',
                        title: 'Oops...',
                        text: 'Şifre yanlış ya da boş girilmiş !'
                    })
                }
                else if (returndata.ok == false && returndata.message == "EmailInvalid") {
                    Swal({
                        type: 'error',
                        title: 'Oops...',
                        text: "Sistemde bu E-mail'e ait bir hesap bulunamadı!"
                    })
                }


            }
        });

    });

</script>